"use strict";(self.webpackChunkavail_docs_wiki=self.webpackChunkavail_docs_wiki||[]).push([[2053],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>b});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(a),h=o,b=p["".concat(l,".").concat(h)]||p[h]||u[h]||r;return a?n.createElement(b,i(i({ref:t},d),{},{components:a})):n.createElement(b,i({ref:t},d))}));function b(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1696:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var n=a(7462),o=(a(7294),a(3905)),r=a(4996);const i={id:"babe",title:"BABE",sidebar_label:"BABE",description:"The block author selection algorithm that powers Avail",keywords:["docs","avail","BABE","consensus"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},s=void 0,l={unversionedId:"about/consensus/babe",id:"about/consensus/babe",title:"BABE",description:"The block author selection algorithm that powers Avail",source:"@site/docs/about/consensus/babe-explained.md",sourceDirName:"about/consensus",slug:"/about/consensus/babe",permalink:"/about/consensus/babe",draft:!1,editUrl:"https://github.com/availproject/availproject.github.io/tree/main/docs/about/consensus/babe-explained.md",tags:[],version:"current",lastUpdatedBy:"Danny Salman",lastUpdatedAt:1703141549,formattedLastUpdatedAt:"Dec 21, 2023",frontMatter:{id:"babe",title:"BABE",sidebar_label:"BABE",description:"The block author selection algorithm that powers Avail",keywords:["docs","avail","BABE","consensus"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},sidebar:"avail",previous:{title:"Consensus",permalink:"/category/consensus"},next:{title:"GRANDPA",permalink:"/about/consensus/grandpa"}},c={},d=[{value:"Introduction",id:"introduction",level:2},{value:"BABE Block Production Process",id:"babe-block-production-process",level:2},{value:"BABE Functions",id:"babe-functions",level:2}],p={toc:d},u="wrapper";function h(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("strong",{parentName:"em"},"B"),"lind ",(0,o.kt)("strong",{parentName:"em"},"A"),"ssignment for ",(0,o.kt)("strong",{parentName:"em"},"B"),"lockchain ",(0,o.kt)("strong",{parentName:"em"},"E"),"xtension")," (BABE) serves as a block production engine, drawing inspiration from ",(0,o.kt)("a",{parentName:"p",href:"https://eprint.iacr.org/2017/573.pdf"},"Ouroboros Praos"),", another proof-of-stake protocol. It functions\nautonomously, offering probabilistic finality, or it can be integrated with a finality mechanism like GRANDPA."),(0,o.kt)("p",null,"BABE operates on a slot-based algorithm, dividing time into eras, epochs, further segmented into slots. Within the Avail context, each slot lasts for twenty seconds, aligning with the\ntarget block time. In every slot, BABE determines an author (or potentially multiple authors) responsible for producing a block."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you're not familiar with Avail's terminology, you may check out our ",(0,o.kt)("a",{parentName:"p",href:"/glossary"},(0,o.kt)("ins",null,"Glossary")),".")),(0,o.kt)("p",null,"On Avail's explorer, you can observe the eras and epochs by navigating to the staking page and locating the information at the top-right corner."),(0,o.kt)("img",{src:(0,r.Z)("img/avail/epoch-era.png"),width:"100%",height:"100%"}),(0,o.kt)("h2",{id:"babe-block-production-process"},"BABE Block Production Process"),(0,o.kt)("p",null,"Each slot may have both a primary and a secondary author, chosen from amongst a set of active validators. The assignment of\nprimary authors, aka slot leaders, is a random process governed by the VRF function. However, due to the way the function works, there may be instances where no validators qualify as the primary author. To maintain a consistent block time,\nBABE employs a round-robin system to designate secondary slot leaders, who produce new blocks without a designated leader."),(0,o.kt)("p",null,"As we know, the selection of primary authors is powered by a verifiable random function (VRF). It thus becomes\ncrucial to establish a universally accepted form of randomness that remains untampered and verifiable for all parties involved. VRFs address this challenge by generating a\npseudo-random number accompanied by a proof of its proper generation. These functions take various parameters, including a private key. The VRF considers an epoch random\nseed (pre-determined by all nodes), a slot number, and the author's private key. As each node possesses a unique private key, this ensures the generation of a distinct pseudo-random\nvalue for each slot."),(0,o.kt)("p",null,"During an epoch, each author employs its VRF for every slot. For slots where the output falls below an agreed-upon threshold, the validator gains the right to author a block during\nthat slot. The random nature of slot assignment introduces the possibility of slots without a primary leader and those with multiple primaries."),(0,o.kt)("p",null,"To address vacant slots and maintain uninterrupted block production, BABE incorporates a round-robin fallback mechanism. Each slot is assigned a secondary leader. In cases where\nno entity declares itself as the primary leader at the slot's commencement, the secondary leader steps in to produce a block. This fallback mechanism ensures that every slot has\nan assigned block author, contributing to the assurance of a consistent block time."),(0,o.kt)("p",null,"Below is an example of BABE block production in action."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," \ud83c\udf81 Prepared block for proposing at 127907 (121 ms) [hash: 0x7f68240041f3e921c33968dd834468335da4150ea323d99f60b6cdf28ac82bbf; parent_hash: 0xb34c\u20269bf8; extrinsics (15): [0x04c0\u2026652f, 0x8751\u2026b60b, 0xfbe4\u202623f7, 0x9817\u2026c7ee, 0x33ab\u2026b82f, 0x5296\u2026ab61, 0xfb50\u202616a7, 0xba5e\u2026bf07, 0xafba\u2026c299, 0xc383\u2026ec57, 0x2876\u2026e25b, 0x4971\u20260cc8, 0x5204\u20265aa5, 0xbf53\u20263ab0, 0xdd87\u2026ef68]\n \ud83d\udd16 Pre-sealed block for proposal at 127907. Hash now 0x329230818f4aba570925f85d4ed78eca38cdd3f08996777588fd29050f565e4a, previously 0x7f68240041f3e921c33968dd834468335da4150ea323d99f60b6cdf28ac82bbf.\n \ud83c\udf81 Prepared block for proposing at 127939 (126 ms) [hash: 0xcc5158a686169433cf8c8b7a417103381d9cf96e8c57a695c8bae2a9cf466378; parent_hash: 0x35f0\u20269f48; extrinsics (11): [0x3386\u20262d55, 0xe4df\u2026ba5a, 0xe924\u2026a0e9, 0x7265\u2026be43, 0x0d0e\u20264365, 0x474c\u2026e485, 0x2613\u2026e297, 0x3d2b\u2026e930, 0x5d93\u2026e34f, 0x3457\u20264676, 0xbfdf\u202676c9]\n \ud83d\udd16 Pre-sealed block for proposal at 127939. Hash now 0x20ba2195108a6b76faf3c83656d9ba265e426041e97681a66264c15362c0241e, previously 0xcc5158a686169433cf8c8b7a417103381d9cf96e8c57a695c8bae2a9cf466378.\n")),(0,o.kt)("h2",{id:"babe-functions"},"BABE Functions"),(0,o.kt)("p",null,"Here's an overview of how BABE functions."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Slot-Based Consensus"),": BABE operates on a slot-based mechanism, where time is divided into fixed intervals known as slots. Each slot represents a designated timeframe during which\na new block can be produced."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Leader Election"),": In each slot, a leader is elected to propose and produce a new block for the parachain. The leader election process in BABE is deterministic and depends on a\ncombination of the block's hash and a random number derived from the VRF (Verifiable Random Function) scheme. The VRF helps ensure unpredictability while still allowing nodes to verify the legitimacy of the leader."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Blind Assignment"),': The term "Blind Assignment" in BABE refers to the process of selecting the leader for a slot without revealing the identity of the leader until the block is\nproduced. This adds an element of security and prevents potential attacks based on knowing in advance who the leader will be.'),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Adaptive Time Slot Duration"),": BABE features an adaptive time slot duration, meaning that the length of each slot can be adjusted dynamically based on network conditions. This\nadaptability helps Avail handle variations in block production times more efficiently."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Finalization"),": While BABE is responsible for proposing and producing blocks, finalization of blocks is achieved through the GRANDPA consensus algorithm. GRANDPA is responsible\nfor ensuring the overall security and consistency of the Avail chain."),(0,o.kt)("p",null,"While BABE is a powerful algorithm to select new block authors in a verifiably random way, Avail uses GRANDPA in addition to BABE to achieve deterministic chain finalization. In the next article, we will learn about GRANDPA, Avail's block finalization mechanism."))}h.isMDXComponent=!0}}]);