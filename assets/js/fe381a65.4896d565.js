"use strict";(self.webpackChunkavail_docs_wiki=self.webpackChunkavail_docs_wiki||[]).push([[141],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>m});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=n.createContext({}),d=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(o),h=a,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||r;return o?n.createElement(m,i(i({ref:t},c),{},{components:o})):n.createElement(m,i({ref:t},c))}));function m(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var d=2;d<r;d++)i[d]=o[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},8090:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=o(7462),a=(o(7294),o(3905));o(4996);const r={id:"session-keys",title:"Avail Node - Session Keys",sidebar_label:"Session Keys",description:"Learn how to generate session keys",keywords:["docs","avail","node","da"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},i=void 0,s={unversionedId:"operate/validator/session-keys",id:"operate/validator/session-keys",title:"Avail Node - Session Keys",description:"Learn how to generate session keys",source:"@site/docs/operate/validator/0030-session-keys.md",sourceDirName:"operate/validator",slug:"/operate/validator/session-keys",permalink:"/operate/validator/session-keys",draft:!1,editUrl:"https://github.com/availproject/availproject.github.io/tree/main/docs/operate/validator/0030-session-keys.md",tags:[],version:"current",lastUpdatedBy:"Marko Petrlic",lastUpdatedAt:1706234107,formattedLastUpdatedAt:"Jan 26, 2024",sidebarPosition:30,frontMatter:{id:"session-keys",title:"Avail Node - Session Keys",sidebar_label:"Session Keys",description:"Learn how to generate session keys",keywords:["docs","avail","node","da"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},sidebar:"avail",previous:{title:"Simple Deployment",permalink:"/operate/validator/simple-node-deployment"},next:{title:"Stake Your Validator",permalink:"/operate/validator/staking"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Session Keys",id:"session-keys",level:2},{value:"Bare Metal:",id:"bare-metal",level:3},{value:"Docker/ Podman",id:"docker-podman",level:3},{value:"Output",id:"output",level:3}],c={toc:d},p="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(p,(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("admonition",{title:"Before you start",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"This chapter continues from the 'Simple Deployment' page, so be sure to read that one before proceeding with this one.")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Before trying anything, make sure that you fully read the chapter first before doing any actual work.")),(0,a.kt)("p",null,"With our infrastructure set up and our node running, we are ready to register ourselves as potential future validators. If the need for on-chain registration to become a validator seems foreign to you, then this would be a perfect opportunity to do your own research about how Proof of Stake and Nominated Proof Of Stake works."),(0,a.kt)("p",null,"In short, to prevent people from running faulty validators and earning tokens, all validators need to bond a certain amount of tokens to register and be eligible for the position of producing blocks. With that mechanism in place, all validators that are in some way faulty will either be deregistered or, in the worst case, slashed."),(0,a.kt)("p",null,"This explanation only covers the surface of how the whole system works, and before continuing, make sure that you do your own research and learn how the system actually operates. A good place to start is to read ",(0,a.kt)("a",{parentName:"p",href:"https://wiki.polkadot.network/docs/learn-staking"},"Polkadot's explanation")," on how it works."),(0,a.kt)("h2",{id:"session-keys"},"Session Keys"),(0,a.kt)("p",null,"Before we can bond our tokens we need to generate our session keys."),(0,a.kt)("p",null,"In simpler terms, session keys in Substrate are like special secret codes that uniquely identify who's in charge of creating and validating blocks in a blockchain. Each participant, known as a validator, has their own secret key. They use these keys to sign off on the blocks they create, sort of like a personalized signature. This helps make sure everyone knows who's responsible for what, and it adds a layer of security to the whole blockchain process. So, we can think of session keys as the blockchain's way of keeping track of who did what in a trustworthy and secure manner."),(0,a.kt)("p",null,"To generate it, we can the following command inside the server that is running our node:"),(0,a.kt)("h3",{id:"bare-metal"},"Bare Metal:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# Generate session keys\ncurl -H "Content-Type: application/json" -d \'{"id":1, "jsonrpc":"2.0", "method": "author_rotateKeys", "params":[]}\' http://localhost:9944\n\n# Restart our Node\nsudo systemctel restart avail.service\n')),(0,a.kt)("h3",{id:"docker-podman"},"Docker/ Podman"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# First let\'s ssh into our container\n\n# Option 1: Docker non-root\nsudo docker exec -it $(docker ps -lq) /bin/bash\n\n# Option 2: Podman\npodman exec -lit /bin/bash\n\n# Generate the Session keys\ncurl -H "Content-Type: application/json" -d \'{"id":1, "jsonrpc":"2.0", "method": "author_rotateKeys", "params":[]}\' http://localhost:9944\n\n# Exit and restart containe\nexit\n\n# Option 1: Docker non-root\nsudo docker restart $(docker ps -lq)\n\n# Option 2: Podman\npodman restart -l\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you encounter the following error inside the container: ",(0,a.kt)("inlineCode",{parentName:"p"},"bash: curl: command not found"),", make sure to first install ",(0,a.kt)("inlineCode",{parentName:"p"},"curl")," inside the container and then retry it.\nFor Ubuntu, you can run ",(0,a.kt)("inlineCode",{parentName:"p"},"apt install curl -y")," for root or ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo apt install curl -y")," for non-root user to have it installed")),(0,a.kt)("h3",{id:"output"},"Output"),(0,a.kt)("p",null,"Running the curl command either bare metal or inside a container should yield the same result. The command generated the session keys for us, stored them inside our node-related-data folder, and displayed it for us. This key is unique to your own node, so it's important to make sure that it is stored safely and never shared with anyone."),(0,a.kt)("p",null,"Example Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "result": "0x0c26b9ba4b8fb5f3051a24663ce491663d8e8e81e8f1450ab23e4edd7d3b4f4c7e5e1047ae1edAb5bde2dad7915629b8aec892c550515ed0b1cb7e056e8a33d16c9c7faba50abd75438d4a2bbdbb6b2c35e09ad480e07ffeb1a2175feda23a3fd475eb0ad21e2f67693a1d6964b81d1454a19dd53256223a178a74cb0df4cc43",\n  "id": 1\n}\n')))}u.isMDXComponent=!0}}]);