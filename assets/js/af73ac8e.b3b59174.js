"use strict";(self.webpackChunkavail_docs_wiki=self.webpackChunkavail_docs_wiki||[]).push([[9509],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=i,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||o;return n?a.createElement(m,r(r({ref:t},p),{},{components:n})):a.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4282:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));n(4996);const o={id:"grandpa",title:"GRANDPA",sidebar_label:"GRANDPA",description:"The block finalization algorithm that powers Avail",keywords:["docs","avail","grandpa","consensus"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},r=void 0,s={unversionedId:"about/consensus/grandpa",id:"about/consensus/grandpa",title:"GRANDPA",description:"The block finalization algorithm that powers Avail",source:"@site/docs/about/consensus/grandpa-explained.md",sourceDirName:"about/consensus",slug:"/about/consensus/grandpa",permalink:"/about/consensus/grandpa",draft:!1,editUrl:"https://github.com/availproject/availproject.github.io/tree/main/docs/about/consensus/grandpa-explained.md",tags:[],version:"current",lastUpdatedBy:"Danny Salman",lastUpdatedAt:1703141549,formattedLastUpdatedAt:"Dec 21, 2023",frontMatter:{id:"grandpa",title:"GRANDPA",sidebar_label:"GRANDPA",description:"The block finalization algorithm that powers Avail",keywords:["docs","avail","grandpa","consensus"],image:"https://docs.availproject.org/img/avail/AvailDocs.png"},sidebar:"avail",previous:{title:"BABE",permalink:"/about/consensus/babe"},next:{title:"NPoS",permalink:"/about/consensus/npos"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"GRANDPA Functions",id:"grandpa-functions",level:2},{value:"GRANDPA Finalisation Steps",id:"grandpa-finalisation-steps",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,'GRANDPA, which stands for "',(0,i.kt)("em",{parentName:"p"},(0,i.kt)("strong",{parentName:"em"},"G"),"host-based ",(0,i.kt)("strong",{parentName:"em"},"R"),"ecursive ",(0,i.kt)("strong",{parentName:"em"},"AN"),"cestor ",(0,i.kt)("strong",{parentName:"em"},"D"),"eriving ",(0,i.kt)("strong",{parentName:"em"},"P"),"refix ",(0,i.kt)("strong",{parentName:"em"},"A"),"greement"),'," is the consensus algorithms used by Avail. GRANDPA works in conjunction with another consensus\nGRANDPA in and of itself is a block finalization algorithm, and as such needs to be paired with block-authoring mechanisms like ',(0,i.kt)("a",{parentName:"p",href:"https://paritytech.github.io/polkadot-sdk/master/sc_consensus_aura/index.html"},"Aura")," or BABE (Avail uses BABE) to ensure a properly functioning blockchain."),(0,i.kt)("p",null,"Finality in GRANDPA's context means that once a block is added to the blockchain, it is irreversible and cannot be reverted. This is in\ncontrast to probabilistic finality found in some other consensus mechanisms."),(0,i.kt)("p",null,"To observe a straightforward illustration of GRANDPA in action, inspecting Avail node log files reveals both the importation of blocks and the subsequent finalization of these blocks.\nIn the below logs extract, the first block to undergo finalization is 127972, followed by 127973 and 127974. As emphasized earlier, this signifies that the information contained in\nblocks from 127974 and those preceding it has achieved finality, rendering them immutable and irreversible."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"}," \ud83d\udca4 Idle (18 peers), best: #127974 (0x181d\u202606a9), finalized #127972 (0x21ce\u202650eb), \u2b07 339.5kiB/s \u2b06 368.3kiB/s\n \u2728 Imported #127975 (0x334f\u202638b7)\n \ud83d\udca4 Idle (18 peers), best: #127975 (0x334f\u202638b7), finalized #127973 (0x9513\u20260b53), \u2b07 298.8kiB/s \u2b06 380.2kiB/s\n \u2728 Imported #127976 (0x4f1d\u2026c015)\n \ud83d\udca4 Idle (18 peers), best: #127976 (0x6a21\u20261904), finalized #127974 (0x181d\u202606a9), \u2b07 224.2kiB/s \u2b06 374.0kiB/s\n")),(0,i.kt)("h2",{id:"grandpa-functions"},"GRANDPA Functions"),(0,i.kt)("p",null,"Here's an overview of how GRANDPA functions within Avail, up and above finality."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"GHOST Protocol"),': GRANDPA utilizes the GHOST (Greedy Heaviest Observed Sub-Tree) protocol, a concept borrowed from Ethereum\'s blockchain protocol. The GHOST protocol helps in\nselecting the most secure and agreed-upon chain by considering not only the main chain but also the "uncles" or competing blocks.'),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Recursive Ancestor Derivation"),": GRANDPA employs a recursive ancestor derivation mechanism to efficiently determine the finality of blocks. This process involves determining a\ncommon ancestor among a set of competing blocks in the network. This common ancestor is then used to finalize the blocks."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Byzantine Fault Tolerance"),": GRANDPA is Byzantine Fault Tolerant, meaning it can maintain its correctness and security even when some nodes in the network behave maliciously or\nfail. This is crucial for ensuring the robustness of the consensus algorithm in the face of potential attacks."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Finality Gadget"),': GRANDPA is often referred to as a "finality gadget" because it specifically focuses on providing finality to the blocks produced by the BABE consensus algorithm\non the Avail chain. While BABE is responsible for proposing and producing blocks, GRANDPA finalizes these blocks, ensuring that they are permanently added to the blockchain.'),(0,i.kt)("h2",{id:"grandpa-finalisation-steps"},"GRANDPA Finalisation Steps"),(0,i.kt)("p",null,"GRANDPA sequence of events to bring about the finalization of new blocks:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'A node assigned as the "primary" disseminates the highest block it deems potentially final from the preceding round.'),(0,i.kt)("li",{parentName:"ul"},'Following a network delay, each validator broadcasts a "pre-vote" for the highest block it believes should be finalized. Assuming the supermajority of validators are honest,\nthis block should extend the chain initially broadcast by the primary. This newly proposed chain might consist of several blocks more than the last chain that was officially finalized.'),(0,i.kt)("li",{parentName:"ul"},'Each validator calculates the highest block that can be deemed finalized based on the collection of pre-votes. If the set of pre-votes extends the last officially finalized chain,\neach validator proceeds to cast a "pre-commit" in favor of that particular chain.'),(0,i.kt)("li",{parentName:"ul"},"Subsequently, each validator awaits the reception of adequate pre-commits to formulate a commit message, officially endorsing the newly finalized chain.")))}u.isMDXComponent=!0}}]);